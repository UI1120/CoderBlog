# A04 記事エディター詳細設計

## 1. 画面概要
記事の執筆、編集、メタデータ設定、画像のアップロード・挿入を行う。

## 2. 必要なフォームデータ
### 全ユーザー共通
- `title`: 記事タイトル
- `summary`: 記事サマリー（要約）
- `content`: Markdown 本文
- `category_id`: カテゴリ選択
- `tag_ids`: タグ（複数選択可）
- `project_ids`: プロジェクト
- `group_creator_id`: グループタグ（任意）
- `thumbnail_file`: サムネイル画像（multipart/form-data または Base64）

### 管理者権限のみ変更可能
- `status`: 保存ステータス (draft / published / scheduled / private)
- `published_at`: 公開予定日時（JST）（予約投稿用）(任意)

## 3. I/O（API フォーマット）

### 3.1. 記事作成 (新規)
- **メソッド**: `POST`
- **エンドポイント**: `/api/admin/articles`

#### Request JSON (Metadata only, for initial save)
```json
{
  "title": "新規記事タイトル",
  "summary": "概要...",
  "category_id": 1,
  "tag_ids": [2, 5],
  "project_ids": [1],
  "status": "draft"
}
```

### 3.2. 記事内容・本文更新
- **メソッド**: `POST`
- **エンドポイント**: `/api/admin/articles/{id}`

#### Request JSON
```json
{
  "title": "更新後のタイトル",
  "summary": "更新後の概要...",
  "content": "## Markdown本文\nここから記事を書きます...",
  "category_id": 1,
  "tag_ids": [2, 5, 8],
  "project_ids": [1],
  "status": "published",
  "published_at": "2026-01-18T12:00:00Z"
}
```

### 3.3. 画像・メディアアップロード
- **メソッド**: `POST`
- **エンドポイント**: `/api/admin/media`
- **Format**: `multipart/form-data`

#### Response JSON
```json
{
  "url": "https://storage.example.com/images/2026/01/image.png",
  "file_id": 999
}
```

### 3.4. 既存記事データ取得 (編集時)
- **メソッド**: `GET`
- **エンドポイント**: `/api/admin/articles/{id}`

#### Response JSON
```json
{
  "article_id": 1,
  "title": "タイトル",
  "summary": "概要",
  "content": "# Markdown...",
  "category_id": 1,
  "tag_ids": [2, 5],
  "project_ids": [1],
  "status": "draft",
  "thumbnail_url": "https://..."
}
```
迫力のあるプレミアムなデザインで、エディターにはリアルタイムプレビュー機能が必須となります。
