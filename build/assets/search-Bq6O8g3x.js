import{r as a,j as e,c as u}from"./globals-yvt4wxtg.js";import{A as w,H as f,F as P}from"./Footer-Bjps1rmA.js";import{C as j,P as E}from"./Pagination-DaZ2B9Vb.js";import"./ArticleCard-L1smj3SI.js";function S(){const[r,h]=a.useState([]),[d,o]=a.useState(!0),[c,i]=a.useState(1),l=12,n=(new URLSearchParams(window.location.search).get("q")||"").trim(),m=n.toLowerCase()==="all";a.useEffect(()=>{const s=parseInt(new URLSearchParams(window.location.search).get("page")||"1");i(s),o(!0),fetch(`${w}/articles?q=${encodeURIComponent(n)}`).then(t=>t.json()).then(t=>{h(t),o(!1)}).catch(t=>{console.error("Failed to fetch search results:",t),o(!1)})},[n]),a.useEffect(()=>{const s=()=>{const t=parseInt(new URLSearchParams(window.location.search).get("page")||"1");i(t)};return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[]);const p=s=>{i(s);const t=new URL(window.location.href);t.searchParams.set("page",s.toString()),window.history.pushState({page:s},"",t.toString()),window.scrollTo({top:0,behavior:"smooth"})},g=Math.ceil(r.length/l),x=r.slice((c-1)*l,c*l);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(f,{}),e.jsxs("main",{className:"container mx-auto px-6 py-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:m?"最新記事一覧":`「${n}」の検索結果`}),d?e.jsx("div",{className:"text-center text-gray-500",children:"検索中..."}):r.length>0?e.jsxs(e.Fragment,{children:[e.jsx(j,{articles:x}),e.jsx(E,{currentPage:c,totalPages:g,onPageChange:p})]}):e.jsx("div",{className:"text-center text-gray-500",children:"該当する記事が見つかりませんでした。"})]}),e.jsx(P,{})]})}async function y(){}y().then(()=>{u.createRoot(document.getElementById("root")).render(e.jsx(S,{}))});
