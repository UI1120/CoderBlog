import{r as s,j as e,c as P}from"./globals-yvt4wxtg.js";import{A as g,H as u,F as j}from"./Footer-Bjps1rmA.js";import{C as E,P as k}from"./Pagination-DaZ2B9Vb.js";import"./ArticleCard-L1smj3SI.js";function S(){const[n,d]=s.useState(null),[i,c]=s.useState([]),[t,f]=s.useState(!0),[l,x]=s.useState(1),m=12,h=s.useRef(null);s.useEffect(()=>{const r=new URLSearchParams(window.location.search),o=r.get("pid"),p=parseInt(r.get("page")||"1");x(p),f(!0);const N=fetch(`${g}/projects?pid=${o}`).then(a=>{if(!a.ok)throw new Error("Project not found");return a.json()}).then(a=>d(a)),y=fetch(`${g}/articles`).then(a=>a.json()).then(a=>c(a));Promise.all([N,y]).then(()=>f(!1)).catch(a=>{console.error("Failed to fetch project data:",a),window.location.href="/notfound"})},[]),s.useEffect(()=>{const r=()=>{const o=new URLSearchParams(window.location.search),p=parseInt(o.get("page")||"1");x(p)};return window.addEventListener("popstate",r),()=>window.removeEventListener("popstate",r)},[]),s.useEffect(()=>{console.log("Page changed to:",l),h.current&&h.current.scrollIntoView({behavior:"smooth"})},[l]);const w=r=>{x(r);const o=new URL(window.location.href);o.searchParams.set("page",r.toString()),window.history.pushState({page:r},"",o.toString())},b=Math.ceil(i.length/m),v=i.slice((l-1)*m,l*m);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(u,{}),e.jsx("section",{className:"relative bg-cover bg-center",style:{backgroundImage:`url('${n?.thumbnail||"https://images.unsplash.com/photo-1683813479742-4730f91fa3ec?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0ZWNobm9sb2d5JTIwY29kaW5nJTIwd29ya3NwYWNlfGVufDF8fHx8MTc2NDQ3NjM1OXww&ixlib=rb-4.1.0&q=80&w=1080"}' )`},children:e.jsx("div",{className:"container mx-auto px-6 py-24 md:py-32",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center backdrop-blur-md bg-[#2d7a5f]/70 rounded-2xl p-8 border-2 border-[#67e0b8] shadow-lg",children:[e.jsx("h1",{className:"text-white mb-4 text-4xl font-bold drop-shadow-lg",children:n?.project_name||"Projects"}),e.jsx("p",{className:"text-gray-200 mb-8 max-w-2xl mx-auto drop-shadow-md text-xl",children:n?.description||"Explore our latest work and innovative solutions."}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center"})]})})}),e.jsx("main",{ref:h,className:"container mx-auto px-6 py-12",style:{scrollMarginTop:"100px"},children:t?e.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(E,{articles:v}),e.jsx(k,{currentPage:l,totalPages:b,onPageChange:w})]})}),e.jsx(j,{})]})}function L(){const[n,d]=s.useState([]),[i,c]=s.useState(!0);return s.useEffect(()=>{c(!0),fetch(`${g}/projects`).then(t=>t.json()).then(t=>{d(t),c(!1)}).catch(t=>{console.error("Failed to fetch projects:",t),c(!1)})},[]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(u,{}),e.jsx("section",{className:"relative bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1080')"},children:e.jsx("div",{className:"container mx-auto px-6 py-24 md:py-32",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center backdrop-blur-md bg-[#2d7a5f]/70 rounded-2xl p-8 border-2 border-[#67e0b8] shadow-lg",children:[e.jsx("h1",{className:"text-white mb-4 text-4xl font-bold drop-shadow-lg",children:"Our Projects"}),e.jsx("p",{className:"text-gray-200 mb-8 max-w-2xl mx-auto drop-shadow-md text-xl",children:"Explore the various initiatives and technical projects by OPUCoder."})]})})}),e.jsx("main",{className:"container mx-auto px-6 py-12",children:i?e.jsx("div",{className:"text-center text-gray-500",children:"Loading..."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-8",children:n.map(t=>e.jsx("a",{href:`/project?pid=${t.project_id}`,className:"block transform hover:scale-[1.02] transition-transform",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-shadow overflow-hidden border border-gray-100 flex flex-col md:flex-row h-full md:h-[250px]",children:[e.jsxs("div",{className:"md:w-1/3 lg:w-1/4 relative overflow-hidden",children:[e.jsx("img",{src:t.thumbnail||"https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1080",alt:t.project_name,className:"w-full h-48 md:h-full object-cover transition-transform duration-500 hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"md:w-2/3 lg:w-3/4 p-8 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsxs("span",{className:"bg-[#e8f5f1] text-[#2d7a5f] text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider",children:["Project ",t.project_id]})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-[#2d7a5f] transition-colors line-clamp-1",children:t.project_name}),e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed line-clamp-2 md:line-clamp-3",children:t.description})]}),e.jsx("div",{className:"mt-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2 text-[#2d7a5f] font-bold text-lg group-hover:translate-x-1 transition-transform",children:[e.jsx("span",{children:"詳細をチェック"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]})]})},t.project_id))})}),e.jsx(j,{})]})}async function I(){}const M=new URLSearchParams(window.location.search).get("pid");I().then(()=>{P.createRoot(document.getElementById("root")).render(M?e.jsx(S,{}):e.jsx(L,{}))});
